<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="base.html :: layout(~{:: section})">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Order Summary</title>
    <section>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <style>
        .accordion-button {
            background-color: #41ba63;
            color: black;
        }
        .accordion-button:active {
            background-color: #06521c;
            color: white;
        }
        .accordion-button:focus {
            box-shadow: none;
            border: 1px solid #043d14;
        }
        .accordion-button:not(.collapsed) {
            background-color: #41ba63;
            color: black;
        }
        .accordion-button:not(.collapsed)::after {
            background-image: url('/images/accordion-nav.svg');
        }
        .accordion-body {
            padding: 1rem;
        }
        /* Make images responsive */
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
    </section>
</head>

<body>
<section>
<div class="container">
    <div class="row mt-5">
        <!-- Left Column: Order Summary and Address Accordion -->
        <div class="col-lg-9 col-md-8 col-sm-12">
            <div class="accordion" id="accordionPanelsStayOpenExample">
                <!-- Order Summary Accordion -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                        <button class="accordion-button font-weight-bold" style="background-color: #41ba63; color: black;" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                            Order Summary
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
                        <div class="accordion-body">
                            <div class="card-body">
                                <table class="table table-responsive">
                                    <thead>
                                        <tr>
                                            <th scope="col">Item Name</th>
                                            <th scope="col">Item Image</th>
                                            <th scope="col">Price</th>
                                            <th scope="col">Quantity</th>
                                            <th scope="col">Total Price</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="o : ${clist}">   
                                            <td th:text="${o.cart_name}"></td>
                                            <td><img alt="" style="min-width: 145px; max-height: 80px;" th:src="@{'/images/' + ${o.cart_image}}"></td>
                                            <td th:text="|&#8377${o.cart_price}|"></td>
                                            <td class="text-center" th:text="${o.cart_quantity}"></td>
                                            <td th:text="|&#8377${o.total_price}|"></td>
                                            <td>
                                                <a href="">
                                                    <img alt="" th:src="@{'/images/delete.png'}" class="img-fluid" width="30px">
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Address Accordion -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                        <button class="accordion-button collapsed font-weight-bold" style="background-color: #41ba63; color: black;" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                            Address
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
                        <div class="accordion-body">
                            <div class="card card-body">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex justify-content-between align-items-center px-0 pb-0">
                                        <div class="form-check" th:each="a : ${profile}">
                                            <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
                                            <label class="form-check-label" for="exampleRadios1">
                                                <b style="font-size: 18px;" th:text="|Name:- ${a.profile_name}|"></b><br>
                                                <b style="font-size: 18px;" th:text="|Locality:- ${a.profile_locality}|"></b><br>
                                                <b style="font-size: 18px;" th:text="|City:- ${a.profile_city}|"></b><br>
                                                <b style="font-size: 18px;" th:text="|State:- ${a.profile_state}|"></b><br>
                                                <b style="font-size: 18px;" th:text="|Pincode:- ${a.profile_pincode}|"></b>
                                            </label>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Terms & Conditions Accordion -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                        <button class="accordion-button collapsed font-weight-bold" style="background-color: #41ba63; color: black;" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
                            Terms & Conditions
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThree">
                        <div class="accordion-body">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quibusdam quidem rem dolore fugit. Maxime est rerum, omnis unde deleniti nobis beatae ipsum et nihil alias sed doloribus. Rem, porro? Perferendis neque delectus quis asperiores placeat, in earum, ullam alias nisi omnis aliquam nesciunt iste inventore officiis eum eos cumque porro similique voluptas quae! Sint,
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Price Details -->
        <div class="col-lg-3 col-md-4 col-sm-12 mt-5">
            <div class="card">
                <div class="card-header mt-2 text-center">
                    <h3>Price Details</h3>
                </div>
                <div class="card-body p-0">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center">Price <span th:text="${actualprice}"></span></li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">Delivery Charges <span class="text-success">Free</span></li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"><b>Total Amount</b> <strong th:text="|&#8377${totalprice}|"></strong></li>
                    </ul>
                </div>

                <div class="card-footer text-center">
                    <strong style="color: green;" th:text="|Your Total savings of this order &#8377${discount}|"></strong><br>
                    <div class="text-center">
                        <form th:action="@{order}" class="mt-2">
                            <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                                data-key="pk_test_51MecbySDp5WmxkHpeMZlzRTKR7HI3lk7bg7wwhgM0rfyeUopY3U0uTbe0EUcHBiyrVde7HT3zI58ExQzDDguitD500y39yn9R9"
                                data-description="Pay" data-amount="Rs." data-locale="auto"
                                data-currency="inr">
                            </script>
                        </form>
                        <a href=""><button class="btn btn-success mt-1">Place Order</button></a>
                    </div>
                </div>
            </div>
        </div>
    </div>    
</div>
</section>
</body>
</html>
